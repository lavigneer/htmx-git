{% extends "base.html" %} {% block content %}
<div class="grid grid-cols-[400px_minmax(0,1fr)] items-center gap-8">
  <div class="flex h-screen flex-grow-0 flex-col">
    <div class="m-2">
      <h1 class="text-xl">Current Branch</h1>
      <h2 class="text-lg" id="current-branch">
        {{branch_list.current_branch}}
      </h2>
    </div>

    <div class="m-2 flex-grow">
      <h1 class="text-xl">Branches</h1>
      {{ branch_list|safe }}
    </div>
  </div>
  <div class="flex h-screen flex-grow flex-col overflow-auto">
    <input
      class="mt-1 block w-full rounded-md border-transparent bg-gray-100 focus:border-gray-500 focus:bg-white focus:ring-0"
      name="filter"
      placeholder="Filter..."
      hx-get="/log/list/{{branch_list.current_branch}}"
      hx-trigger="keyup changed delay:500ms, load"
      hx-target="#log-list"
      hx-swap="innerHTML"
    />
    <table class="w-full table-fixed border-collapse">
      <thead>
        <tr>
          <th
            class="w-3/12 border border-slate-300 p-4 text-left font-semibold text-slate-900"
          >
            Sha
          </th>
          <th
            class="border border-slate-300 p-4 text-left font-semibold text-slate-900"
          >
            Message
          </th>
        </tr>
      </thead>
      <tbody id="log-list"></tbody>
      <tfoot>
        <button
          hx-get="/log/list/{{branch_list.current_branch}}?filter={{branch_list.current_filter}}&page={{branch_list.current_page + 1}}"
          hx-trigger="click"
          hx-target="#log-list"
          hx-swap="innerHTML"
        >
          Next Page
        </button>
        <button
          hx-get="/log/list/{{branch_list.current_branch}}"
          hx-trigger="click"
          hx-target="#log-list"
          hx-swap="innerHTML"
        >
          Previous Page
        </button>
      </tfoot>
    </table>
  </div>
</div>
{% endblock %}
